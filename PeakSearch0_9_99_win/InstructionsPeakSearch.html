<html lang="en">
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<style type="text/css">
   body { line-height: 1.5; }
</style>
<head>
<title> Instructions for PeakSearch CUI program </title>
</head>
<body>
<font size="+1"><b> Instructions for PeakSearch CUI program </b></font><br>
<font size="-1" color="#339999"> [English / <a href="InstructionsPeakSearch_JP.html">Japanese</a>] </font><br>
<p>
Version 0.99 is the initial release of the PeakSearch program (<a href="http://sourceforge.jp/projects/conograph/releases/">download page</a> in SourceForge.jp). <BR>
The same program is also implemented in powder auto-indexing software Conograph GUI, 
and outputs an IGOR text file used for Conograph CUI.
</p>
<p>
The program executes peak-search for any kinds of 1-dimensional distributions (Figure 1) represented as a histogram data.
</p>
<div align="center">
   <p class="image"><img src="figures/Graph0.png" width="586" height="297" alt="Figure 1"></p>
   <p class="caption ">Figure 1 : Example of 1-dimensional distribution</p>
</div>
Subsequently, an IGOR text file is outputted, 
which contains the powder diffraction pattern and the following values of peaks with the peak-height more than a given threshold (<a href="sample/samp:<BR>
le1(CharacteristicXrays)/output/sample1_pks.histogramIgor">Example</a>):
<ol>
 <LI> peak-positions
 <LI> peak-heights (estimated background is substracted from the y-value of the peaktop)
 <LI> full-widths-at-half-maximum (FWHM)
</ol>
If you open the file with IGOR Pro, you can see a plot as in Figure 2 immediately.<BR>
<div align="center">
   <p class="image"><img src="figures/Graph1.png" width="588" height="300" alt="Figure 2"></p>
   <p class="caption ">Figure 2 : Output IGOR text file</p>
</div>
</p>

<h2>FAQ</h2>
<ul>
    <li><a href="#HowtoUse">How to use the PeakSearch program</a></li>
    <li><a href="#ParametersToModify">When results are not satisfactory, which parameters should be modified?</a>
    </li>
    <li><a href="#HowtoReportBugs">How do I report bugs?</a></li>
    <li><a href="#copyright">About the copyright</a></li>
</ul>

<h3><a name="HowtoUse">How to use the PeakSearch program</a></h3>
<ol>

<LI> The PeakSearch program requires the three following input files. 
    (Examples can be found in the "sample" folder.)
    <UL>
    <LI> A *.inp.xml file that includes information about input parameters
         (<a href="sample/sample1(CharacteristicXrays)/sample1.inp.xml">Example</a>) </LI>
    <LI> A cntl.inp.xml file that includes the names of the *.inp.xml file and the output file
         (<a href="sample/sample1(CharacteristicXrays)/cntl.inp.xml">Example</a>) </LI>
    <LI> A text file to give a 1-dimensional distribution. At present, the following three formats are available:
<ol>
 <LI> <a href="sample/sample3(PF)/sample3.dat">XY</a></LI>
 <LI> <a href="sample/sample2(TOF)/sample2.histogramIGOR">IGOR</a></LI>
 <LI> <a href="sample/sample1(CharacteristicXrays)/sample1.dat">Rietan</a></LI>
</ol>
</LI>
	The errors of y-values in the third column of the XY and IGOR formats are used to compute a threshold.<BR>
	If the third column is empty, the square roots of y-values are used as the errors.
    </UL>
</LI>
<LI> Copy one of the folders from the sample folder.
     Modify the contents of the two xml-files and the name of the *.inp.xml file if necessary.<BR>
     If you change the name of the *.inp.xml file, then it will be necessary to modify the contents of the cntl.inp.xml file accordingly.</LI>

<LI> Open a command prompt or terminal window in your operating system. <BR>
     Change the current folder to the same folder that contains the modified cntl.inp.xml file.</LI>

<LI> Enter the absolute path to the PeakSearch.exe file on the command line and execute PeakSearch.</LI>
</ol>

<h3><a name="ParametersToModify">When results are not satisfactory, which parameters should be modified?</a></h3>
<p>
<a href="#Threshold">&lt;Threshold&gt;</a>, <a href="#NumberOfPointsForSGMethod">&lt;NumberOfPointsForSGMethod&gt;</a> are necessary to be modified
in order to obtain more successful results.<BR>
It is also necessary to set <a href="#Alpha2Correction">&lt;Alpha2Correction&gt;</a> for powder patterns including &alpha;2 reflections of characteristic X-rays.
</p>
<ol>
<LI> <a name="Threshold">&lt;Threshold&gt;</a> on peak-heights influences on peak-search results, 
     because a peak at peak-position x is detected,
     if and only if it has a peak-height more than (Threshold) &times; Err[y], where Err[y] is the value of error in the y-value of the distribution at x.
     Our recommended value of &lt;Threshold&gt; is 3.0. <BR>
     Adjust &lt;Threshold&gt; (to a value within 1--10 if the input observational errors are proper), if the result is not satisfactory. <BR>

<div align="center">
   <p class="image"><img src="figures/Graph2.png" width="588" height="300" alt="Figure 3"></p>
   <p class="caption ">Figure 3 : Example of a case of synchrotron data.<BR>
     (By modifiying &lt;Threshold&gt;, it is possible to detect small diffraction peaks as well as peaks with high intensities.)</p>
</div>

<LI> <a name="NumberOfPointsForSGMethod">&lt;NumberOfPointsForSGMethod&gt;</a> is also an important parameter so as not to pick up background noise as peaks.<BR>
     If this number is smaller, the smoothing curve is fit to local irregularity more finely. <BR>
     In Figure 4.1, noises are picked up as peaks, because the smoothing curve almost coincides with the background noise.
     
<table border="0" cellpadding="0">
  <tr>
	<td align="center" width="400"> <img src="figures/Graph3_1.png" width="328" height="282" alt="Figure 4.1"> </td>
	<td align="center" width="400"> <img src="figures/Graph3_2.png" width="328" height="282" alt="Figure 4.2"> </td>
  </tr>
  <tr>
	<td align="center"> Figure 4.1 : "NumberOfPointsForSGMethod" = 5 </td>
	<td align="center"> Figure 4.2 : "NumberOfPointsForSGMethod" = 25 </td>
  </tr>
</table>
</LI>

<LI> <a name="Alpha2Correction">&lt;Alpha2Correction&gt;</a> should be set to 1 if the powder pattern contains &alpha;2 peaks, or set to 0 otherwise.<BR>
If it is not Cu K&alpha;2, &lt;Kalpha1WaveLength&gt; and &lt;Kalpha2WaveLength&gt; are necessary to be modified accordingly.

<table border="1" cellpadding="5">
  <tr>
    <th> </th>
    <th> K&alpha;1 </th>
    <th> K&alpha;2 </th>
  </tr>
  <tr>
	<td> Ag </td><td> 0.5594075 </td><td> 0.563798 </td>
  </tr>
  <tr>
	<td> Co </td><td> 1.788965 </td><td> 1.792850 </td>
  </tr>
  <tr>
	<td> Cr </td><td> 2.289700 </td><td> 2.293606 </td>
  </tr>
  <tr>
	<td> Cu </td><td> 1.540562 </td><td> 1.544398 </td>
  </tr>
  <tr>
	<td> Fe	</td><td> 1.936042 </td><td> 1.939980 </td>
  </tr>
  <tr>
	<td> Mo	</td><td> 0.709300 </td><td> 0.713590 </td>
  </tr>
</table>
</LI>

</ol>

<h3><a name="HowtoReportBugs">How do I report bugs?</a></h3>
<p>
You should send us a bug report with 
<u>all of the input and output files attached (including LOG_PEAKSEARCH.txt)</u> to the following e-mail address: 
<UL>
<LI> conograph-bugs (at) ml.post.kek.jp </LI>
</UL>
</p>

<h3><a name="copyright">About the copyright</a></h3>
<p>
The PeakSearch program currently utilizes an unpublished algorithm.<BR>
The versions of the source code are distributed as open source under the MIT license on the <a href="http://en.sourceforge.jp/projects/conograph/scm/svn/tree/head">repository list</a> of the Conograph project.
</p>

<h2><a name="Acknowledgments">Acknowledgments</a></h2>
<p>
I would like to express my gratitude to those who offered powder diffraction patterns for the Conograph project.
</p>

<A HREF="#">[Back to top]</A>
</body>

